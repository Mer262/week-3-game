<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jurassic Hangman!</title>
    <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>
    <!-- Added a link to Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link href="https://fonts.googleapis.com/css?family=Eater|Love+Ya+Like+A+Sister|Slackey" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <!-- 2. Choose a theme for your game! In the demo, we picked an 80s theme: 80s questions, 80s sound and an 80s aesthetic. You can choose any subject for your theme, though, so be creative!
    3. Use key events to listen for the letters that your players will type.
    4. Display the following on the page:
    * Press any key to get started!
    * Wins: (# of times user guessed the word correctly).
    * If the word is `madonna`, display it like this when the game starts: `_ _ _ _ _ _ _`.
    * As the user guesses the correct letters, reveal them: `m a d o _  _ a`.
    * Number of Guesses Remaining: (# of guesses remaining for the user).
    * Letters Already Guessed: (Letters the user has guessed, displayed like `L Z Y H`).
    5. After the user wins/loses the game should automatically choose another word and make the user play it. -->
</head>

<body>
    <div class="jumbotron">
        <h1 class="text-center">Hangman: Jurassic Edition</h1>
        <br>
        <br>
        <h2 class="text-center" id="subhead">Press Any Key to Start Your Prehistoric Adventure!</h2></div>
    <div></div>
    <div class="container">
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Wins:</h3>
                </div>
                <div class="panel-body text-center">
                    <h1 id="win-counter"></h1>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Current Word:</h3>
                </div>
                <div class="panel-body text-center">
                    <h1 id="current-word"></h1></div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Number of Guesses Remaining:</h3>
                </div>
                <div class="panel-body text-center">
                    <h1 id="guess-counter"></h1>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Letters Already Guessed:</h3>
                </div>
                <div class="panel-body text-center">
                    <h1 id="letters-guessed"></h1>
                </div>
            </div>
        </div>
        <script type="text/javascript">
        $(document).ready(function() {
            var rawrFull = new Audio('assets/Tommy.m4r');
            // rawrFull.play()
            var rawrClip = new Audio('assets/RawrClip.m4r');
            // rawrClip.play()    

            // create an array of (uppercase) words for computer to select from; they match the theme  
            var wordBank = ["DINOSAUR", "RAPTOR", "CLAWS", "FOSSIL", "EXTINCT", "JURASSIC", "VELOCIRAPTOR", "TYRANNOSAURUS"]
            console.log(wordBank)
                // create function countDown to track number of user guesses; starts with a value of 10; each time countDown() is called, 1 is subtracted from the counter.

            var countDown = (function() {
                var counter = 10;
                return function() {
                    return counter -= 1;
                }
            })();
            // console.log(countDown())
            // write the countDown value into the Guesses Remaining panel
            $("#guess-counter").text("10")
                // $("#guess-counter").text(countDown())

            // create counter to track user wins

            var numWins = 0
                // to increment number of user wins
            numWins = parseInt(numWins + 1)


            // create array to hold user key guesses from onkeyup

            var userGuesses = []
            console.log(userGuesses)
                //function to push user onkeyup characters to array
                // userGuesses.push()


            // if var guessNumber = 0, user runs out of guesses and game ends

            // when game begins, computer selects item from the array
            // create 2 variables: 
            // var computerPick to contain the word selected by computer from the array
            // select random item from word bank array and set as value of var computerPick  
            var computerPick = wordBank[Math.floor(Math.random() * wordBank.length)];
            console.log(computerPick)


            //var underScores containing underscores for each character in var computerPick. 
            // to set value of var underScores, populate it w/number of underscores matching number of characters in var computerPick

            var n = computerPick.length;
            console.log(n)
            var underScores = ("_" + " ").repeat(n)
            console.log(underScores)

            // var underScores is the variable that will be changed if the onkeyup character is in var computerPick
            // write var underScores to the html
            $("#current-word").text(underScores)

            // onkeyup function to caputure the key code/character selected by the user
            document.onkeyup = function(event) {

                // Captures the key press, converts it to uppercase, and saves it to a variable.
                var letter = String.fromCharCode(event.keyCode).toUpperCase();
                console.log(letter)

                // computer logs key up event and compares user guess to previously selected keys
                // if key has been previously selected, inform user that you've picked this letter before, but do not count this from guessNumber
                if (computerPick.includes(letter) === true) {
                    var indices = [];
                    for (var i = 0; i < computerPick.length; i++) {
                        if (computerPick[i] === letter) indices.push(i);

                        console.log(indices);
                        // var s = "Stack Overflow";
                        // var index = 3;
                        // s = s.substr(0, index) + 'x' + s.substr(index + 1);
                        underScores = underScores.substr(0, indices) + letter + underScores.substr(indices + 1);
                        $("#current-word").text(underScores);
                    }

                } else if (userGuesses.includes(letter) === true) {
                    alert("You've already guessed that!");
                    rawrClip.play();
                } else if (computerPick.includes(letter) === false) {
                    $("#guess-counter").text(countDown());
                    userGuesses.push(letter);
                    rawrClip.play();

                } else if (true) {

                } else if (computerPick.includes(letter) === true) {

                    rawrClip.play();

                } else {
                    rawrClip.play()
                }
                // get index i of var letter in computerPick

                // replace "_" at index i with var letter in underScores
                // String.prototype.replaceAt = function(index, character) {
                //     return this.substr(0, index) + letter + this.substr(index + character.length);
                // }
            };
        });




        // 

        // if the onkeyup character has not yet been selected by user, loop through characters in var computerPick to find matches. 

        // if character matches, replace correct underscore position with the letter from onkeyup

        // if character does not match, letter is added to "letters already guessed" and number of guesses remaining is reduced by 1

        // if countDown = 0,  game is reset

        // if there are no more underscores in var underScores, user wins. Add 1 to number or wins. reset game.
        </script>
</body>

</html>
